; Var
DRUCKSENSOR EQU P2.0
WASSERHAHNSENSOR EQU P2.1
WASSERZAEHLER EQU P1

WASSERVERBRAUCH EQU R0
TIMERWERT EQU R1


AJMP init

init:
MOV TMOD, #11H
MOV P2, #00H
AJMP hahncheck

hahncheck:
JNB WASSERHAHNSENSOR, hahncheck
AJMP wasserberechnungstart

wasserberechnungstart:
MOV WASSERVERBRAUCH, #0D
MOV TH0, #00H
MOV TL0, #0F5H
SETB TR0
berechnungsstep:
MOV R1, TH0
CJNE R1, #01H, berechnungsstep



table:
db 100D